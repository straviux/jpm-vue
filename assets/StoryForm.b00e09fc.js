import{u as k,f as _,E as C,s as i,r as f,o as c,c as d,b as e,t as S,e as s,d as u,w as B,G as r,H as x,I as b,J as M,K as N,l as v}from"./index.705b6b93.js";import{Q as U}from"./vue-quill.snow.f24f5277.js";const V={class:"mt-5 md:col-span-2 md:mt-0 max-w-7xl mx-auto"},j=["onSubmit"],T={class:"shadow sm:overflow-hidden sm:rounded-md"},D={class:"space-y-10 bg-white sm:p-6"},F={class:"flex justify-between"},G={class:"text-xl uppercase mb-2"},H=v("Cancel"),I=e("label",{class:"block font-medium text-gray-700"},"Cover photo",-1),J={class:"mt-2 flex justify-center rounded-md border-2 border-dashed border-gray-300 px-6 pt-5 pb-6"},L={class:"space-y-1 text-center"},A={key:0,class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},E=e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),P=[E],R=["src","alt"],q={class:"flex items-center justify-center text-gray-600"},O={for:"file-upload",class:"relative cursor-pointer rounded bg-white font-medium text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 hover:text-indigo-500 px-3"},Q=e("span",null,"Upload Cover Photo",-1),W=e("p",{class:"text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB",-1),z={class:"grid grid-cols-3 gap-6"},K={class:"col-span-12"},X=e("label",{for:"headline",class:"block font-medium text-gray-700"},"Title",-1),Y={class:"mt-4 flex shadow-sm"},Z=e("label",{for:"excerpt",class:"block font-medium text-gray-700"},"Subtitle",-1),$={class:"mt-2"},ee=e("p",{class:"mt-2 text-gray-500"}," Brief information about this story. Will be displayed as subheading on story list. ",-1),te=e("label",{for:"content",class:"block font-medium text-gray-700"},"Content",-1),se={class:"mt-2"},oe={class:"px-4 py-3 sm:px-6 flex items-center justify-center space-x-7"},ne={class:"form-control"},ae={class:"label cursor-pointer space-x-2"},le=e("span",{class:"label-text text-lg"},"Active",-1),ie={class:"form-control"},re={class:"label cursor-pointer space-x-2"},ce=e("span",{class:"label-text text-lg"},"Featured",-1),de={class:"px-4 py-3 text-right sm:px-6"},ue={type:"submit",class:"btn lg:btn-wide bg-blue-500 text-white gap-1 uppercase shadow mt-4 rounded-[4px] btn-success"},pe=v(" Save "),fe={__name:"StoryForm",setup(me){const p=k(),m=_(null);let t=_({headline:"",excerpt:"",content:"",status:!1,featured:!1,slug:"",cover_photo:"",cover_photo_url:"",article_type_id:2}),h="created";C(()=>i.state.articles.current.data,(a,o)=>{t.value={...JSON.parse(JSON.stringify(a))},m.value.setHTML(a.content)}),p.params.id&&(i.dispatch("articles/getById",p.params.id),h="updated");const y=()=>{i.dispatch("articles/saveArticle",t.value).then(({data:a})=>{i.commit("notify",{type:"success",message:"Data was successfully "+h})}).catch(a=>{i.commit("notify",{type:"error",message:"Something went wrong, please try again"})})},g=a=>{const o=a.target.files[0],l=new FileReader;l.onload=()=>{t.value.cover_photo=l.result,t.value.cover_photo_url=l.result},l.readAsDataURL(o)};return(a,o)=>{const l=f("router-link"),w=f("mdicon");return c(),d("div",V,[e("form",{onSubmit:M(y,["prevent"]),class:"animate-fade-in-down animation",style:N({animationDelay:"0.5s"})},[e("div",T,[e("div",D,[e("div",F,[e("h1",G,S(s(t).id?s(t).headline:"Write a story"),1),u(l,{to:"/admin/stories-maintenance",class:"underline text-blue-800"},{default:B(()=>[H]),_:1})]),e("div",null,[I,e("div",J,[e("div",L,[s(t).cover_photo_url?(c(),d("img",{key:1,src:s(t).cover_photo_url,alt:s(t).headline,"w-64":"","h-48":"","object-cover":"",class:"mb-8"},null,8,R)):(c(),d("svg",A,P)),e("div",q,[e("label",O,[Q,e("input",{id:"file-upload",name:"file-upload",type:"file",class:"sr-only",onChange:g},null,32)])]),W])])]),e("div",z,[e("div",K,[X,e("div",Y,[r(e("input",{"onUpdate:modelValue":o[0]||(o[0]=n=>s(t).headline=n),type:"text",name:"headline",id:"headline",class:"input block w-full flex-1 rounded-sm border-gray-300 focus:border-transparent focus:ring-none sm:text-sm"},null,512),[[x,s(t).headline]])])])]),e("div",null,[Z,e("div",$,[r(e("textarea",{"onUpdate:modelValue":o[1]||(o[1]=n=>s(t).excerpt=n),id:"excerpt",name:"excerpt",rows:"3",class:"input block w-full flex-1 h-20 rounded-sm p-2 border-gray-300 focus:border-transparent focus:ring-none sm:text-sm",placeholder:"Type something here"},null,512),[[x,s(t).excerpt]])]),ee]),e("div",null,[te,e("div",se,[u(s(U),{content:s(t).content,"onUpdate:content":o[2]||(o[2]=n=>s(t).content=n),contentType:"html",theme:"snow",toolbar:"essential",ref_key:"quill",ref:m},null,8,["content"])])]),e("div",oe,[e("div",ne,[e("label",ae,[le,r(e("input",{type:"checkbox",class:"checkbox checkbox-primary","onUpdate:modelValue":o[3]||(o[3]=n=>s(t).status=n)},null,512),[[b,s(t).status]])])]),e("div",ie,[e("label",re,[ce,r(e("input",{type:"checkbox",class:"checkbox checkbox-primary","onUpdate:modelValue":o[4]||(o[4]=n=>s(t).featured=n)},null,512),[[b,s(t).featured]])])])]),e("div",de,[e("button",ue,[u(w,{name:"content-save"}),pe])])])])],44,j)])}}};export{fe as default};
