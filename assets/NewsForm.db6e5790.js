import{u as C,f,E as S,s as i,r as x,o as d,c as u,e as o,m as N,h as V,b as e,G as B,H as M,t as U,d as p,w as F,I as c,J as L,K as v,L as g,F as j,l as b,C as D}from"./index.d8644ee2.js";import{L as H,Q as T}from"./Loader.3ed54d7d.js";const E={class:"mt-5 md:col-span-2 md:mt-0 max-w-4xl mx-auto"},G=["onSubmit"],I={class:"shadow sm:overflow-hidden sm:rounded-md"},J={class:"space-y-10 bg-white sm:p-6"},A={class:"flex justify-between"},P={class:"text-xl uppercase mb-2"},R=b("Cancel"),q={class:"form-control w-full max-w-xs"},O=e("label",{class:"label block font-medium text-gray-700"}," Category ",-1),Q=D('<option value="1">health</option><option value="2">politics and governance</option><option value="3">energy</option><option value="4">weather</option><option value="5">legal</option><option value="6">sports</option><option value="7">business</option><option value="8">education</option><option value="9">social</option>',9),W=[Q],z=e("label",{class:"block font-medium text-gray-700"},"Cover photo",-1),K={class:"mt-2 flex justify-center rounded-md border-2 border-dashed border-gray-300 px-6 pt-5 pb-6"},X={class:"space-y-1 text-center"},Y={key:0,class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},Z=e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),$=[Z],ee=["src","alt"],te={class:"flex items-center justify-center text-gray-600"},oe={for:"file-upload",class:"relative cursor-pointer rounded bg-white font-medium text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 hover:text-indigo-500 px-3"},se=e("span",null,"Upload Cover Photo",-1),ae=e("p",{class:"text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB",-1),ne={class:"grid grid-cols-3 gap-6"},le={class:"col-span-12"},ie=e("label",{for:"headline",class:"block font-medium text-gray-700"},"Headline",-1),ce={class:"mt-4 flex shadow-sm"},re=e("label",{for:"excerpt",class:"block font-medium text-gray-700"},"Excerpt",-1),de={class:"mt-2"},ue=e("p",{class:"mt-2 text-gray-500"}," Brief information about this news. Will be displayed as subheading on news list. ",-1),pe=e("label",{for:"content",class:"block font-medium text-gray-700"},"Content",-1),me={class:"mt-2"},_e={class:"px-4 py-3 sm:px-6 flex items-center justify-center space-x-7"},he={class:"form-control"},fe={class:"label cursor-pointer space-x-2"},xe=e("span",{class:"label-text text-lg"},"Active",-1),ve={class:"form-control"},ge={class:"label cursor-pointer space-x-2"},be=e("span",{class:"label-text text-lg"},"Featured",-1),ye={class:"px-4 py-3 text-center sm:px-6"},we={type:"submit",class:"btn lg:btn-wide bg-blue-500 text-white gap-1 uppercase shadow mt-4 rounded-[4px] btn-success"},ke=b(" Save "),Ve={__name:"NewsForm",setup(Ce){const m=C(),_=f(null);let t=f({headline:"",excerpt:"",category_id:"",content:"",status:!1,featured:!1,slug:"",cover_photo:"",cover_photo_url:"",article_type_id:1}),h="created",r=!1;S(()=>i.state.articles.current.data,(n,s)=>{t.value={...JSON.parse(JSON.stringify(n))},t.value.category&&(t.value.category_id=t.value.category.id),_.value.setHTML(n.content)}),m.params.id&&(i.dispatch("articles/getById",m.params.id),h="updated");const y=()=>{r=!0,i.dispatch("articles/saveArticle",t.value).then(({data:n})=>{i.commit("notify",{type:"success",message:"Data was successfully "+h}),r=!1}).catch(n=>{i.commit("notify",{type:"error",message:"Something went wrong, please try again or contact your admin"}),r=!1})},w=n=>{const s=n.target.files[0],l=new FileReader;l.onload=()=>{t.value.cover_photo=l.result,t.value.cover_photo_url=l.result},l.readAsDataURL(s)};return(n,s)=>{const l=x("router-link"),k=x("mdicon");return d(),u(j,null,[o(i).state.articles.current.loading||o(r)?(d(),N(H,{key:0,isFullScreen:!0})):V("",!0),e("div",E,[e("form",{onSubmit:B(y,["prevent"]),class:"animate-fade-in-down animation",style:M({animationDelay:"0.5s"})},[e("div",I,[e("div",J,[e("div",A,[e("h1",P,U(o(t).id?o(t).headline:"Write a news article"),1),p(l,{to:"/admin/news-maintenance",class:"underline text-blue-800"},{default:F(()=>[R]),_:1})]),e("div",q,[O,c(e("select",{class:"select select-bordered","onUpdate:modelValue":s[0]||(s[0]=a=>o(t).category_id=a)},W,512),[[L,o(t).category_id]])]),e("div",null,[z,e("div",K,[e("div",X,[o(t).cover_photo_url?(d(),u("img",{key:1,src:o(t).cover_photo_url,alt:o(t).headline,"w-64":"","h-48":"","object-cover":"",class:"mb-8"},null,8,ee)):(d(),u("svg",Y,$)),e("div",te,[e("label",oe,[se,e("input",{id:"file-upload",name:"file-upload",type:"file",class:"sr-only",onChange:w},null,32)])]),ae])])]),e("div",ne,[e("div",le,[ie,e("div",ce,[c(e("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>o(t).headline=a),type:"text",name:"headline",id:"headline",class:"input block w-full flex-1 rounded-sm border-gray-300 focus:border-transparent focus:ring-none sm:text-sm"},null,512),[[v,o(t).headline]])])])]),e("div",null,[re,e("div",de,[c(e("textarea",{"onUpdate:modelValue":s[2]||(s[2]=a=>o(t).excerpt=a),id:"excerpt",name:"excerpt",rows:"3",class:"input block w-full flex-1 h-20 rounded-sm p-2 border-gray-300 focus:border-transparent focus:ring-none sm:text-sm",placeholder:"Type something here"},null,512),[[v,o(t).excerpt]])]),ue]),e("div",null,[pe,e("div",me,[p(o(T),{content:o(t).content,"onUpdate:content":s[3]||(s[3]=a=>o(t).content=a),contentType:"html",theme:"snow",toolbar:"essential",ref_key:"quill",ref:_},null,8,["content"])])]),e("div",_e,[e("div",he,[e("label",fe,[xe,c(e("input",{type:"checkbox",class:"checkbox checkbox-primary","onUpdate:modelValue":s[4]||(s[4]=a=>o(t).status=a)},null,512),[[g,o(t).status]])])]),e("div",ve,[e("label",ge,[be,c(e("input",{type:"checkbox",class:"checkbox checkbox-primary","onUpdate:modelValue":s[5]||(s[5]=a=>o(t).featured=a)},null,512),[[g,o(t).featured]])])])]),e("div",ye,[e("button",we,[p(k,{name:"content-save"}),ke])])])])],44,G)])],64)}}};export{Ve as default};
